"use strict";var document,window;var audioFile=document.getElementById("crt-song-file");var play_btn=document.getElementById("plSong");var song_cover=document.getElementById("song-cover");var ctr_trk=document.getElementById("current-track");var trk_dur=document.getElementById("track-time");var default_bar=document.getElementById("defaultBar");var progress_bar=document.getElementById("progressBar");var progress_barb=document.getElementById("crtProgress");var seek_dot=document.getElementById("seek-dot");var songId=0;var pre_song=document.getElementById("preSong");var next_song=document.getElementById("nxtSong");var song_name=document.getElementById("s-nm-main");var s_ar=document.getElementById("ar-nm-main");var song_cover_img=document.getElementById("song-cover-img");var buf_bar=document.getElementById("buffer-bar");var buf_amt=document.getElementById("buffer-amt");var rpt_btn=document.getElementById("rpt-song");var vol=document.getElementById("vol-state");var vol_cont=document.getElementById("vol-cont");var artist_name=document.getElementById("ar-nm");var s_nm=document.getElementById("s-nm");var min_plbtn=document.getElementById("pl-state");var pl_o_ar=document.getElementById("pl_o_aero");var ar_h_i=document.getElementById("s-m-img");var updateCrtTime;var play_song=document.getElementById("play-song");var plSong=document.getElementById("plSong");var crt_list=document.getElementById("song-items");window.addEventListener("online",function(){document.getElementById("online-status").style.backgroundColor="green";document.getElementById("on_st_txt").innerHTML="Back online! Please reload again!";document.getElementById("online-status").style.top="0px";setTimeout(function(){document.getElementById("online-status").style.display="none"},2000);return false});window.addEventListener("offline",function(){document.getElementById("online-status").style.backgroundColor="red";document.getElementById("on_st_txt").innerHTML="You are offline!";document.getElementById("online-status").style.top="0px";setTimeout(function(){document.getElementById("online-status").style.display="none"},2000);return false});function pl_track(){plSong.style.backgroundImage="linear-gradient(150deg, #d2039e, #1703d2)";if(!audioFile.paused&&!audioFile.ended){audioFile.pause();window.clearInterval(updateCrtTime);min_plbtn.innerHTML='<svg width="26" height="20" viewBox="-6 0 24 24"> <path class="fill_path" fill="#d2039e" fill-rule="evenodd" d="M0 0v24l20-12z"></path> </svg>';play_song.innerHTML='<svg width="24" height="24" viewBox="-13 -3 35 24" fill="#FFFFFF"><path class="fill_path" fill-rule="evenodd" d="M0 0v24l20-12z"></path></svg>'}else{if(audioFile.paused){audioFile.play();min_plbtn.innerHTML='<svg width="33" height="33" viewBox="0 0 24 24" version="1.1"> <defs></defs> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g transform="translate(-280.000000, -239.000000)" fill="#1703d2" fill-rule="nonzero"> <g transform="translate(20.000000, 213.000000)"> <g transform="translate(260.000000, 26.000000)"> <path class="fill_path" d="M14,19 L18,19 L18,5 L14,5 L14,19 Z M6,19 L10,19 L10,5 L6,5 L6,19 Z"></path> </g> </g> </g> </g> </svg>';play_song.innerHTML='<svg width="24px" height="24px" viewBox="-3 -3 24 24" version="1.1"><defs></defs><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-280.000000, -239.000000)" fill="#FFFFFF" fill-rule="nonzero"><g transform="translate(20.000000, 213.000000)"><g transform="translate(260.000000, 26.000000)"><path class="fill_path" d="M14,19 L18,19 L18,5 L14,5 L14,19 Z M6,19 L10,19 L10,5 L6,5 L6,19 Z"></path></g></g></g></g></svg>'}}}function preloadAudio(){play_btn.removeEventListener("click",pl_track);min_plbtn.removeEventListener("click",pl_track);var f=document.getElementById("csli-src");var e=document.getElementById("cs_li_image");var h=document.getElementById("cs_li_n");var g=document.getElementById("cs_li_ar");f.setAttribute("url",jsonFile.latest_songs[songId].url);f.setAttribute("name",jsonFile.latest_songs[songId].name);f.setAttribute("image",jsonFile.latest_songs[songId].image);f.setAttribute("artist",jsonFile.latest_songs[songId].artist);e.src=jsonFile.latest_songs[songId].image;h.innerHTML=jsonFile.latest_songs[songId].name;g.innerHTML=jsonFile.latest_songs[songId].artist;if(!audioFile.paused&&!audioFile.ended){audioFile.pause();window.clearInterval(updateCrtTime);min_plbtn.innerHTML='<svg width="26" height="20" viewBox="-6 0 24 24"> <path class="fill_path" fill="#d2039e" fill-rule="evenodd" d="M0 0v24l20-12z"></path> </svg>';play_song.innerHTML='<svg width="24" height="24" viewBox="-13 -3 35 24" fill="#FFFFFF"><path class="fill_path" fill-rule="evenodd" d="M0 0v24l20-12z"></path></svg>'}else{if(audioFile.paused){plSong.style.backgroundImage="";min_plbtn.innerHTML='<a class="preloadMin"><svg class="circular" width="35px" height="35px" viewBox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"></circle></svg></a>';play_song.innerHTML='<a class="preloadMain"><svg class="circular-main" style="pointer-events: none" width="35px" height="35px" viewBox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="3" stroke-miterlimit="10"></circle></svg></a>';audioFile.play()}}}function pl_nxt(){if(songId<(crt_list.children.length-1)&&sufCk!==true){songId=songId+1;s_ar.innerHTML=crt_list.children[songId].getAttribute("artist");artist_name.innerHTML=crt_list.children[songId].getAttribute("artist");song_name.innerHTML=crt_list.children[songId].getAttribute("name");s_nm.innerHTML=crt_list.children[songId].getAttribute("name");audioFile.src=crt_list.children[songId].getAttribute("url");song_cover_img.src=crt_list.children[songId].getAttribute("image");progress_bar.style.width="0%";progress_barb.style.width="0%";seek_dot.style.left="0%";buf_amt.style.width="0%";window.clearInterval(updateCrtTime);ctr_trk.innerHTML="00:00";trk_dur.innerHTML="00:00";preloadAudio()}else{if(sufCk===true){suf()}}}next_song.addEventListener("click",pl_nxt);pre_song.addEventListener("click",function(){var a=document.getElementById("preCheckColor");if(songId>0&&sufCk===false){songId=songId-1;s_ar.innerHTML=crt_list.children[songId].getAttribute("artist");artist_name.innerHTML=crt_list.children[songId].getAttribute("artist");song_name.innerHTML=crt_list.children[songId].getAttribute("name");s_nm.innerHTML=crt_list.children[songId].getAttribute("name");audioFile.src=crt_list.children[songId].getAttribute("url");song_cover_img.src=crt_list.children[songId].getAttribute("image");progress_bar.style.width="0%";progress_barb.style.width="0%";seek_dot.style.left="0%";buf_amt.style.width="0%";window.clearInterval(updateCrtTime);ctr_trk.innerHTML="00:00";trk_dur.innerHTML="00:00";preloadAudio()}else{if(sufCk===true){suf()}}});var sufCk=false;function suf(){if(songId<(crt_list.children.length-1)){songId=Math.floor(Math.random()*crt_list.children.length);s_ar.innerHTML=crt_list.children[songId].getAttribute("artist");artist_name.innerHTML=crt_list.children[songId].getAttribute("artist");song_name.innerHTML=crt_list.children[songId].getAttribute("name");s_nm.innerHTML=crt_list.children[songId].getAttribute("name");audioFile.src=crt_list.children[songId].getAttribute("url");song_cover_img.src=crt_list.children[songId].getAttribute("image");progress_bar.style.width="0%";progress_barb.style.width="0%";seek_dot.style.left="0%";buf_amt.style.width="0%";window.clearInterval(updateCrtTime);ctr_trk.innerHTML="00:00";trk_dur.innerHTML="00:00";preloadAudio()}}document.getElementById("sufSong").addEventListener("click",function(){var a=document.getElementById("sufSongColor");if(sufCk===false){sufCk=true;a.setAttribute("fill","#E72C30")}else{sufCk=false;a.setAttribute("fill","#000000")}});function crt_time(){var a=parseInt(audioFile.currentTime/60);var b=parseInt(audioFile.currentTime%60);var c=parseInt(audioFile.duration/60);var d=parseInt(audioFile.duration%60);if(!audioFile.ended){ctr_trk.innerHTML=("0"+a).slice(-2)+":"+("0"+b).slice(-2);trk_dur.innerHTML=("0"+c).slice(-2)+":"+("0"+d).slice(-2)}else{if(audioFile.ended&&(audioFile.loop===false)&&(sufCk===false)){pl_nxt()}else{if(audioFile.ended&&(sufCk===true)){suf()}}}}function fst_load(){s_ar.innerHTML=crt_list.children[0].getAttribute("artist");artist_name.innerHTML=crt_list.children[0].getAttribute("artist");song_name.innerHTML=crt_list.children[0].getAttribute("name");s_nm.innerHTML=crt_list.children[0].getAttribute("name");audioFile.src=crt_list.children[0].getAttribute("url");song_cover_img.src=crt_list.children[0].getAttribute("image");ar_h_i.style.backgroundColor="transparent";pl_o_ar.innerHTML='<svg width="55px" height="55px" viewBox="-9 -9 41 41" version="1.1"> <defs></defs> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g transform="translate(-153.000000, -832.000000)" fill="#807d7d" fill-rule="nonzero"> <g transform="translate(19.000000, 581.000000)"> <g transform="translate(134.000000, 251.000000)"> <polygon class="fill_path" transform="translate(12.000000, 12.000000) rotate(270.000000) translate(-12.000000, -12.000000) " points="8 16.58 12.9446694 12 8 7.41 9.52226721 6 16 12 9.52226721 18"></polygon> </g> </g> </g> </g> </svg>';preloadAudio();pl_o_ar.addEventListener("click",function(){var b=document.getElementById("main-player");var a=document.getElementById("min-player");b.style.display="block";a.style.display="none"});min_plbtn.removeEventListener("click",fst_load)}window.addEventListener("load",function(){audioFile.addEventListener("progress",function(){var b=audioFile.duration,a;if(b>0){for(a=0;a<audioFile.buffered.length;a+=1){if(audioFile.buffered.start(audioFile.duration.length-1-a)<audioFile.currentTime){buf_amt.style.width=(audioFile.buffered.end(audioFile.duration.length-1-a)/audioFile.duration)*100+"%";break}}}});audioFile.addEventListener("timeupdate",function(){var a=audioFile.duration;if(a>0){progress_bar.style.width=(audioFile.currentTime/audioFile.duration)*100+"%";progress_barb.style.width=(audioFile.currentTime/audioFile.duration)*100+"%";seek_dot.style.left=((audioFile.currentTime/audioFile.duration)*100)-0.53+"%"}})});function seek(c){var a=(c.pageX-default_bar.offsetLeft)/default_bar.offsetWidth;var b=a*audioFile.duration;audioFile.currentTime=b;progress_bar.style.width=b+"px";progress_barb.style.width=b+"px"}default_bar.addEventListener("click",seek);default_bar.addEventListener("mouseup",seek);function touchSeek(f){f.preventDefault;var b=(f.touches[0].pageX-default_bar.offsetLeft)/default_bar.offsetWidth;var d=b*audioFile.duration;audioFile.currentTime=d;progress_bar.style.width=d+"px";progress_barb.style.width=d+"px";var a=parseInt(audioFile.currentTime/60),c=parseInt(audioFile.currentTime%60);ctr_trk.innerHTML=("0"+a).slice(-2)+":"+("0"+c).slice(-2);audioFile.pause()}default_bar.addEventListener("touchmove",touchSeek);default_bar.addEventListener("touchend",pl_track);default_bar.addEventListener("touchstart",touchSeek);window.addEventListener("keyup",function(a){if(a.keyCode===75){a.preventDefault();play_btn.click();if(audioFile.paused){play_btn.setAttribute("title","play(k)")}else{play_btn.setAttribute("title","pause(k)")}}});window.addEventListener("keyup",function(a){if(a.keyCode===76){a.preventDefault();next_song.click()}});window.addEventListener("keyup",function(a){if(a.keyCode===74){a.preventDefault();pre_song.click()}});audioFile.volume=1;window.addEventListener("keydown",function(a){if(a.keyCode===77){a.preventDefault();audioFile.muted=false;if(audioFile.volume<1){audioFile.volume=audioFile.volume+0.1}}});window.addEventListener("keydown",function(a){if(a.keyCode===78){a.preventDefault();if(audioFile.volume>0.1){audioFile.volume=audioFile.volume-0.1;if(audioFile.volume>0.1){audioFile.muted=false;if(audioFile.volume<0.1){audioFile.muted=true}}}}});function rpt_song(){var a=document.getElementById("rptChangeOnClick");if(audioFile.loop!==true){sufCk=false;audioFile.loop=true;a.setAttribute("fill","#E72C30")}else{audioFile.loop=false;a.setAttribute("fill","#000000")}}rpt_btn.addEventListener("click",rpt_song);function gnl(){var g=document.getElementById("song-items"),e,d,c;for(e=0;e<jsonFile.latest_songs.length;e++){var l=document.createElement("li"),a=document.createElement("div");a.className="det_hold";l.className="song-list-src";l.setAttribute("url",jsonFile.latest_songs[e].url);l.setAttribute("name",jsonFile.latest_songs[e].name);l.setAttribute("image",jsonFile.latest_songs[e].image);l.setAttribute("artist",jsonFile.latest_songs[e].artist);l.setAttribute("index",e);var f=["s_li_img","s_li_n","s_li_ar","rm_li_song","mv_cr_pl"];for(d=0;d<f.length;d++){var h=document.createElement("span");h.className=f[d];if(d<=2){a.appendChild(h)}else{l.appendChild(h)}l.appendChild(a)}g.appendChild(l)}function b(){var i=document.getElementsByClassName("s_li_img"),m=document.getElementsByClassName("s_li_n"),p=document.getElementsByClassName("s_li_ar"),o=document.getElementsByClassName("rm_li_song"),n=document.getElementsByClassName("det_hold"),k=document.getElementById("mv_cr_pl");for(c=0;c<i.length;c++){var j=document.createElement("img");j.className="s_li_image";j.alt="";j.src=i[c].parentElement.parentElement.getAttribute("image");i[c].appendChild(j);m[c].innerHTML=m[c].parentElement.parentElement.getAttribute("name");p[c].innerHTML=p[c].parentElement.parentElement.getAttribute("artist");o[c].innerHTML='<svg id="Outlined" viewBox="-8 -8 50 50" fill="#bbbbbb"><title/><g id="Fill"><path d="M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2Zm0,26A12,12,0,1,1,28,16,12,12,0,0,1,16,28Z"/><rect height="2" width="12" x="10" y="15"/></g></svg>';o[c].addEventListener("click",function(){this.parentNode.parentNode.removeChild(this.parentNode)});n[c].addEventListener("click",function(){songId=Number(this.parentElement.getAttribute("index"));progress_bar.style.width="0%";progress_barb.style.width="0%";seek_dot.style.left="0%";buf_amt.style.width="0%";window.clearInterval(updateCrtTime);ctr_trk.innerHTML="00:00";trk_dur.innerHTML="00:00";audioFile.src=this.parentElement.getAttribute("url");s_ar.innerHTML=this.parentElement.getAttribute("artist");song_name.innerHTML=this.parentElement.getAttribute("name");song_cover_img.src=this.parentElement.getAttribute("image");preloadAudio()})}}b();min_plbtn.addEventListener("click",fst_load)}window.onload=gnl;audioFile.addEventListener("loadeddata",function(){updateCrtTime=setInterval(crt_time,500);plSong.style.backgroundImage="linear-gradient(150deg, #d2039e, #1703d2)";min_plbtn.innerHTML='<svg width="33" height="33" viewBox="0 0 24 24" version="1.1"> <defs></defs> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g transform="translate(-280.000000, -239.000000)" fill="#1703d2" fill-rule="nonzero"> <g transform="translate(20.000000, 213.000000)"> <g transform="translate(260.000000, 26.000000)"> <path class="fill_path" d="M14,19 L18,19 L18,5 L14,5 L14,19 Z M6,19 L10,19 L10,5 L6,5 L6,19 Z"></path> </g> </g> </g> </g> </svg>';play_song.innerHTML='<svg width="24px" height="24px" viewBox="-3 -3 24 24" version="1.1"><defs></defs><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-280.000000, -239.000000)" fill="#FFFFFF" fill-rule="nonzero"><g transform="translate(20.000000, 213.000000)"><g transform="translate(260.000000, 26.000000)"><path class="fill_path" d="M14,19 L18,19 L18,5 L14,5 L14,19 Z M6,19 L10,19 L10,5 L6,5 L6,19 Z"></path></g></g></g></g></svg>';play_btn.removeEventListener("click",preloadAudio);play_btn.addEventListener("click",pl_track);min_plbtn.removeEventListener("click",preloadAudio);min_plbtn.addEventListener("click",pl_track)});var clmnpl=document.getElementById("clMnPl");clmnpl.addEventListener("click",function(){var b=document.getElementById("main-player");var a=document.getElementById("min-player");if(b.style.display==="none"){b.style.display="block";a.style.display="none"}else{b.style.display="none";a.style.display="block"}});var li_opn=document.getElementById("cr_li_opn");var li_opn_t=document.getElementById("opntext");var li_y;function li_op_s(a){a.preventDefault;li_opn_t.innerHTML="Swipe up";li_y=a.touches[0].pageY/window.innerHeight*100}li_opn.addEventListener("touchstart",li_op_s);function li_op_e(b){var a=document.getElementById("song-list-tab");b.preventDefault;li_opn_t.innerHTML="Swipe up to open playlist";if(li_y<50){a.style.display="block";li_opn.style.top="-"+li_opn.offsetHeight+"px"}else{li_opn.style.top="69%"}}li_opn.addEventListener("touchend",li_op_e);function li_op_m(b){b.preventDefault;li_y=b.touches[0].pageY/window.innerHeight*100;var a=document.getElementById("song-list-tab");li_opn.style.top=b.touches[0].pageY/window.innerHeight*100+"%"}li_opn.addEventListener("touchmove",li_op_m);var li_close=document.getElementById("cr_li_close");var li_close_t=document.getElementById("closetext");var li_cy;var li_tab=document.getElementById("song-list-tab");function li_op_cs(a){a.preventDefault;li_tab.style.overflow="hidden";li_close_t.innerHTML="Swipe";li_cy=a.touches[0].pageY/window.innerHeight*100}li_close.addEventListener("touchstart",li_op_cs);function li_op_ce(a){a.preventDefault;li_tab.style.overflow="scroll";li_close_t.innerHTML="Swipe down to close playlist";if(li_cy<20){li_tab.style.display="block"}else{li_tab.style.display="none";li_opn.style.display="block";li_opn.style.top="69%"}}li_close.addEventListener("touchend",li_op_ce);function li_op_cm(a){a.preventDefault;li_tab.style.overflow="hidden";li_close_t.innerHTML="Swipe";if(li_cy>20){li_close_t.innerHTML="Close!"}li_cy=a.touches[0].pageY/window.innerHeight*100}li_close.addEventListener("touchmove",li_op_cm);